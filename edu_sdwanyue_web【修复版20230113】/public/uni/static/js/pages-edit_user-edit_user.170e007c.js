(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-edit_user-edit_user"],{"07c1":function(n,t,a){"use strict";var e=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=e(a("63ca")),o=e(a("c2ef")),r={name:"UniNavBar",components:{uniStatusBar:i.default,uniIcons:o.default},props:{title:{type:String,default:""},leftText:{type:String,default:""},rightText:{type:String,default:""},leftIcon:{type:String,default:""},rightIcon:{type:String,default:""},fixed:{type:[Boolean,String],default:!1},color:{type:String,default:"#000000"},backgroundColor:{type:String,default:"#FFFFFF"},statusBar:{type:[Boolean,String],default:!1},shadow:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!0}},mounted:function(){uni.report&&""!==this.title&&uni.report("title",this.title)},methods:{onClickLeft:function(){this.$emit("clickLeft")},onClickRight:function(){this.$emit("clickRight")}}};t.default=r},"0911":function(n,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=uni.getSystemInfoSync().statusBarHeight+"px",i={name:"UniStatusBar",data:function(){return{statusBarHeight:e}}};t.default=i},"0e1d":function(n,t,a){var e=a("24fb");t=e(!1),t.push([n.i,".uni-status-bar[data-v-b8634a6e]{width:%?750?%;height:20px\n\t\t/* height: var(--status-bar-height);\n */}",""]),n.exports=t},"1a56":function(n,t,a){"use strict";var e=a("5e0e"),i=a.n(e);i.a},"20a9":function(n,t,a){(function(t){a("ac1f"),a("1276"),function(){var a={qiniuRegion:"",qiniuImageURLPrefix:"",qiniuUploadToken:"",qiniuUploadTokenURL:"",qiniuUploadTokenFunction:null,qiniuShouldUseQiniuFileName:!1};function e(n){a={qiniuRegion:"",qiniuImageURLPrefix:"",qiniuUploadToken:"",qiniuUploadTokenURL:"",qiniuUploadTokenFunction:null,qiniuShouldUseQiniuFileName:!1},i(n)}function i(n){n.region?a.qiniuRegion=n.region:t("error","qiniu uploader need your bucket region"," at qiniuUploader.js:36"),n.uptoken?a.qiniuUploadToken=n.uptoken:n.uptokenURL?a.qiniuUploadTokenURL=n.uptokenURL:n.uptokenFunc&&(a.qiniuUploadTokenFunction=n.uptokenFunc),n.domain&&(a.qiniuImageURLPrefix=n.domain),a.qiniuShouldUseQiniuFileName=n.shouldUseQiniuFileName}function o(n,e,o,c,s,l,d,f){if(null!=n)if(c&&i(c),a.qiniuUploadToken)r(n,e,o,c,s,l,d,f);else if(a.qiniuUploadTokenURL)u((function(){r(n,e,o,c,s,l,d,f)}));else{if(!a.qiniuUploadTokenFunction)return void t("error","qiniu uploader need one of [uptoken, uptokenURL, uptokenFunc]"," at qiniuUploader.js:73");if(a.qiniuUploadToken=a.qiniuUploadTokenFunction(),null==a.qiniuUploadToken&&a.qiniuUploadToken.length>0)return void t("error","qiniu UploadTokenFunction result is null, please check the return value"," at qiniuUploader.js:68");r(n,e,o,c,s,l,d,f)}else t("error","qiniu uploader need filePath to upload"," at qiniuUploader.js:53")}function r(n,e,i,o,r,u,s,l){if(null==a.qiniuUploadToken&&a.qiniuUploadToken.length>0)t("error","qiniu UploadToken is null, please check the init config or networking"," at qiniuUploader.js:80");else{var d=c(a.qiniuRegion),f=n.split("//")[1];o&&o.key&&(f=o.key);var v={token:a.qiniuUploadToken};a.qiniuShouldUseQiniuFileName||(v["key"]=f),s&&s();var p=wx.uploadFile({url:d,filePath:n,name:"file",formData:v,success:function(n){var o=n.data;try{var r=JSON.parse(o),u=a.qiniuImageURLPrefix+"/"+r.key;r.fileUrl=u,r.imageURL=u,t("log",r," at qiniuUploader.js:112"),e&&e(r)}catch(c){t("log","parse JSON failed, origin String is: "+o," at qiniuUploader.js:117"),i&&i(c)}},fail:function(n){t("error",n," at qiniuUploader.js:124"),i&&i(n)},complete:function(n){l&&l(n)}});p.onProgressUpdate((function(n){r&&r(n)})),u&&u((function(){p.abort()}))}}function u(n){wx.request({url:a.qiniuUploadTokenURL,success:function(e){var i=e.data.uptoken;i&&i.length>0?(a.qiniuUploadToken=i,n&&n()):t("error","qiniuUploader cannot get your token, please check the uptokenURL or server"," at qiniuUploader.js:154")},fail:function(n){t("error","qiniu UploadToken is null, please check the init config or networking: "+n," at qiniuUploader.js:158")}})}function c(n){var a=null;switch(n){case"ECN":a="https://up.qiniup.com";break;case"NCN":a="https://up-z1.qiniup.com";break;case"SCN":a="https://up-z2.qiniup.com";break;case"NA":a="https://up-na0.qiniup.com";break;case"ASG":a="https://up-as0.qiniup.com";break;default:t("error","please make the region is with one of [ECN, SCN, NCN, NA, ASG]"," at qiniuUploader.js:171")}return a}n.exports={init:e,upload:o}}()}).call(this,a("0de9")["log"])},"221f":function(n,t,a){var e=a("680f");"string"===typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);var i=a("4f06").default;i("4dc26379",e,!0,{sourceMap:!1,shadowMode:!1})},"3c90":function(n,t,a){"use strict";a.r(t);var e=a("9413"),i=a("cac3");for(var o in i)"default"!==o&&function(n){a.d(t,n,(function(){return i[n]}))}(o);a("ceb8");var r,u=a("f0c5"),c=Object(u["a"])(i["default"],e["b"],e["c"],!1,null,"3445bc1c",null,!1,e["a"],r);t["default"]=c.exports},"3e85":function(n,t,a){"use strict";var e;a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return e}));var i=function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("v-uni-view",{staticClass:"uni-status-bar",style:{height:n.statusBarHeight}},[n._t("default")],2)},o=[]},"5e0e":function(n,t,a){var e=a("bc20");"string"===typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);var i=a("4f06").default;i("38713660",e,!0,{sourceMap:!1,shadowMode:!1})},"63ca":function(n,t,a){"use strict";a.r(t);var e=a("3e85"),i=a("745f");for(var o in i)"default"!==o&&function(n){a.d(t,n,(function(){return i[n]}))}(o);a("a377");var r,u=a("f0c5"),c=Object(u["a"])(i["default"],e["b"],e["c"],!1,null,"b8634a6e",null,!1,e["a"],r);t["default"]=c.exports},"680f":function(n,t,a){var e=a("24fb");t=e(!1),t.push([n.i,".uni-nav-bar-text[data-v-3445bc1c]{\n\n\nfont-size:%?0?%\n}.uni-nav-bar-right-text[data-v-3445bc1c]{font-size:%?28?%}.uni-navbar__content[data-v-3445bc1c]{position:relative;background-color:#fff;overflow:hidden}.uni-navbar__content_view[data-v-3445bc1c]{\ndisplay:flex;\nalign-items:center;flex-direction:row;\nmargin-top:%?-10?%\n}.uni-navbar__header[data-v-3445bc1c]{\ndisplay:flex;\nflex-direction:row;height:44px;line-height:44px;font-size:16px}.uni-navbar__header-btns[data-v-3445bc1c]{\ndisplay:flex;\nflex-wrap:nowrap;width:%?120?%;padding:0 6px;justify-content:center;align-items:center}.uni-navbar__header-btns-left[data-v-3445bc1c]{\ndisplay:flex;\nwidth:%?150?%;justify-content:flex-start}.uni-navbar__header-btns-right[data-v-3445bc1c]{\ndisplay:flex;\nwidth:%?150?%;padding-right:%?30?%;justify-content:flex-end}.uni-navbar__header-container[data-v-3445bc1c]{flex:1}.uni-navbar__header-container-inner[data-v-3445bc1c]{\ndisplay:flex;\nflex:1;align-items:center;justify-content:center;font-size:%?28?%}.uni-navbar__placeholder-view[data-v-3445bc1c]{height:44px}.uni-navbar--fixed[data-v-3445bc1c]{position:fixed;z-index:998}.uni-navbar--shadow[data-v-3445bc1c]{\nbox-shadow:0 1px 6px #ccc\n}.uni-navbar--border[data-v-3445bc1c]{border-bottom-width:%?1?%;border-bottom-style:solid;border-bottom-color:#e5e5e5}",""]),n.exports=t},"745f":function(n,t,a){"use strict";a.r(t);var e=a("0911"),i=a.n(e);for(var o in e)"default"!==o&&function(n){a.d(t,n,(function(){return e[n]}))}(o);t["default"]=i.a},"8c53":function(n,t,a){"use strict";var e;a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return e}));var i=function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("v-uni-view",[a("v-uni-view",{staticClass:"main"},[a("v-uni-view",{staticClass:"avatar-wrap",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.photo.apply(void 0,arguments)}}},[a("v-uni-image",{staticClass:"user-avatar",attrs:{src:n.avatarPath,mode:"aspectFill"}}),a("v-uni-text",{staticClass:"tishi"},[n._v("点击更换头像")])],1),a("v-uni-view",[a("v-uni-input",{staticClass:"nickname-wrap",attrs:{type:"text",value:n.user_nickname},on:{input:function(t){arguments[0]=t=n.$handleEvent(t),n.getUserNickname.apply(void 0,arguments)}}})],1)],1),a("v-uni-button",{staticClass:"pass-login-btn",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.saveEdit.apply(void 0,arguments)}}},[n._v("保存")])],1)},o=[]},9413:function(n,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return e}));var e={uniIcons:a("47e5").default},i=function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("v-uni-view",{staticClass:"uni-navbar"},[a("v-uni-view",{staticClass:"uni-navbar__content",class:{"uni-navbar--fixed":n.fixed,"uni-navbar--shadow":n.shadow,"uni-navbar--border":n.border},style:{"background-color":n.backgroundColor}},[n.statusBar?a("uni-status-bar"):n._e(),a("v-uni-view",{staticClass:"uni-navbar__header uni-navbar__content_view",style:{color:n.color,backgroundColor:n.backgroundColor}},[a("v-uni-view",{staticClass:"uni-navbar__header-btns uni-navbar__header-btns-left uni-navbar__content_view",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.onClickLeft.apply(void 0,arguments)}}},[n.leftIcon.length?a("v-uni-view",{staticClass:"uni-navbar__content_view"},[a("uni-icons",{attrs:{color:n.color,type:n.leftIcon,size:"24"}})],1):n._e(),n.leftText.length?a("v-uni-view",{staticClass:"uni-navbar-btn-text uni-navbar__content_view",class:{"uni-navbar-btn-icon-left":!n.leftIcon.length}},[a("v-uni-text",{style:{color:n.color,fontSize:"14px"}},[n._v(n._s(n.leftText))])],1):n._e(),n._t("left")],2),a("v-uni-view",{staticClass:"uni-navbar__header-container uni-navbar__content_view"},[n.title.length?a("v-uni-view",{staticClass:"uni-navbar__header-container-inner uni-navbar__content_view"},[a("v-uni-text",{staticClass:"uni-nav-bar-text",staticStyle:{"{color":"#000000 }"}},[n._v(n._s(n.title))])],1):n._e(),n._t("default")],2),a("v-uni-view",{staticClass:"uni-navbar__header-btns uni-navbar__content_view",class:n.title.length?"uni-navbar__header-btns-right":"",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.onClickRight.apply(void 0,arguments)}}},[n.rightIcon.length?a("v-uni-view",{staticClass:"uni-navbar__content_view"},[a("uni-icons",{attrs:{color:n.color,type:n.rightIcon,size:"24"}})],1):n._e(),n.rightText.length&&!n.rightIcon.length?a("v-uni-view",{staticClass:"uni-navbar-btn-text uni-navbar__content_view"},[a("v-uni-text",{staticClass:"uni-nav-bar-right-text"},[n._v(n._s(n.rightText))])],1):n._e(),n._t("right")],2)],1)],1),n.fixed?a("v-uni-view",{staticClass:"uni-navbar__placeholder"},[n.statusBar?a("uni-status-bar"):n._e(),a("v-uni-view",{staticClass:"uni-navbar__placeholder-view"})],1):n._e()],1)},o=[]},"972a":function(n,t,a){"use strict";a.r(t);var e=a("fc2c"),i=a.n(e);for(var o in e)"default"!==o&&function(n){a.d(t,n,(function(){return e[n]}))}(o);t["default"]=i.a},a377:function(n,t,a){"use strict";var e=a("b0c7"),i=a.n(e);i.a},b0c7:function(n,t,a){var e=a("0e1d");"string"===typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);var i=a("4f06").default;i("01b84fa8",e,!0,{sourceMap:!1,shadowMode:!1})},bc20:function(n,t,a){var e=a("24fb");t=e(!1),t.push([n.i,".pass-login-btn[data-v-56a49721]{width:80%;font-size:%?30?%;color:#646464;background-color:#65ccb9}.main[data-v-56a49721]{width:90%;margin:calc(20%) auto;text-align:center}.save-btn[data-v-56a49721]{color:#3bdca8}.save-btn2[data-v-56a49721]{color:#3bdca8;margin-top:%?70?%}.avatar-wrap[data-v-56a49721]{width:%?180?%;height:%?200?%;display:inline-block;margin-bottom:%?80?%}.user-avatar[data-v-56a49721]{width:%?150?%;height:%?150?%;border-radius:50%}.tishi[data-v-56a49721]{display:block;font-size:%?18?%;color:#969696}.nickname-wrap[data-v-56a49721]{border-bottom:%?2?% solid #969696;width:50%;height:%?60?%;margin:0 auto}",""]),n.exports=t},cac3:function(n,t,a){"use strict";a.r(t);var e=a("07c1"),i=a.n(e);for(var o in e)"default"!==o&&function(n){a.d(t,n,(function(){return e[n]}))}(o);t["default"]=i.a},ceb8:function(n,t,a){"use strict";var e=a("221f"),i=a.n(e);i.a},f53a:function(n,t,a){"use strict";a.r(t);var e=a("8c53"),i=a("972a");for(var o in i)"default"!==o&&function(n){a.d(t,n,(function(){return i[n]}))}(o);a("1a56");var r,u=a("f0c5"),c=Object(u["a"])(i["default"],e["b"],e["c"],!1,null,"56a49721",null,!1,e["a"],r);t["default"]=c.exports},fc2c:function(n,t,a){"use strict";var e=a("4ea4");a("e25e"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=e(a("20a9")),o=e(a("3c90")),r=getApp(),u={components:{uniNavBar:o.default},data:function(){return{userInfo:{},avatarPath:"",user_nickname:"",avatar_name:""}},onLoad:function(n){""!=r.globalData.userinfo?(this.avatarPath=r.globalData.userinfo.avatar,this.user_nickname=r.globalData.userinfo.user_nickname):uni.navigateTo({url:"../login/login"})},methods:{back:function(){uni.navigateBack({delta:1})},photo:function(){r.globalData;var n=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){var a=t.tempFilePaths,e=a[0];uni.request({url:r.globalData.site_url+"Upload.GetQiniuToken",method:"POST",data:{uid:r.globalData.userinfo.id,token:r.globalData.userinfo.token},success:function(t){if(uni.hideLoading(),0==t.data.data.code){var a=n.decypt(t.data.data.info[0].token),o="UNIAPPicon_edu_kaiyuan"+n.getTime()+"icon.png";i.default.upload(e,(function(t){uni.showToast({title:"上传成功",icon:"none"}),n.avatarPath=t.imageURL,n.avatar_name=o}),(function(n){uni.showToast({title:"上传失败，请重试",icon:"none"})}),{region:"ECN",domain:r.globalData.qiniuimageurl,key:o,uptoken:a})}},fail:function(){uni.hideLoading(),uni.showToast({title:"提交失败",icon:"none"})}})}})},getTime:function(){var n=new Date,t=n.getFullYear(),a=n.getMonth()+1,e=n.getDate(),i=n.getHours(),o=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes(),r=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds();return t+a+e+i+o+r},decypt:function(n){for(var t="",a="1ecxXyLRB.COdrAi:q09Z62ash-QGn8VFNIlb=fM/D74WjS_EUzYuw?HmTPvkJ3otK5gp&",e=0;e<n.length;e++)for(var i=n[e],o=0;o<a.length;o++){var r=a[o];i==r&&(t+=0==o?a[a.length-1]:a[o-1])}return t},getUserNickname:function(n){this.user_nickname=n.detail.value},saveEdit:function(){var n=r.globalData;uni.request({url:n.site_url+"User.UpUserInfo",method:"POST",data:{uid:n.userinfo.id,token:n.userinfo.token,fields:JSON.stringify({user_nickname:this.user_nickname,avatar:this.avatarPath})},success:function(n){0==n.data.data.code&&(r.globalData.userinfo.user_nickname=n.data.data.info[0].user_nickname,r.globalData.userinfo.avatar=n.data.data.info[0].avatar,uni.setStorage({key:"userinfo",data:r.globalData.userinfo,success:function(n){}}),setTimeout((function(){uni.navigateBack({delta:1})}),200)),uni.showToast({icon:"none",title:n.data.data.msg}),parseInt(n.data.data.code)},fail:function(){uni.showToast({title:"网络错误",icon:"none"})}})}}};t.default=u}}]);